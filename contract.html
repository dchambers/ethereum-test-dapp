<html>
  <head>
    <script type="text/javascript" src="dist/web3.js">
    <script type="text/javascript">
      web3.setProvider(new web3.providers.HttpProvider('http://localhost:8545'));

      // solidity source code
      var source = "" +
        "contract test {\n" +
        "   /// @notice Will multiply `a` by 7. \n" +
        "   function multiply(uint a) returns(uint d) {\n" +
        "       return a * 7;\n" +
        "   }\n" +
        "}\n";

      // contract description, this will be autogenerated somehow
      var desc =  [{
      "name": "multiply(uint256)",
      "type": "function",
      "inputs": [
      {
      "name": "a",
      "type": "uint256"
      }
      ],
      "outputs": [
      {
      "name": "d",
      "type": "uint256"
      }
      ]
      }];

      var contract;

      function createExampleContract() {
      // hide create button
      document.getElementById('create').style.visibility = 'hidden';
      document.getElementById('source').innerText = source;

      // create contract
      var address = web3.eth.transact({data: "0x605180600c6000396000f3007c0100000000000000000000000000000000000000000000000000000000600035048063c6888fa114602d57005b60366004356040565b8060005260206000f35b6000600782029050604c565b91905056",gas:"50000",gasprice:"5000"});
      contract = web3.eth.contract(address, desc);
      document.getElementById('call').style.visibility = 'visible';
      }

      function callExampleContract() {

      // this should be generated by ethereum
      var param = parseInt(document.getElementById('value').value);

      var res = contract.call().multiply(param);
      document.getElementById('result').innerText = res.toString(10);

      }
    </script>
  </head>
  <body>
    <h1>contract</h1>
    <div id="source"></div>
    <div id='create'>
      <button type="button" onClick="createExampleContract();">create example contract</button>
    </div>
    <div id='call' style='visibility: hidden;'>
      <input type="number" id="value"></input>
      <button type="button" onClick="callExampleContract()">Call Contract</button>
    </div>
    <div id="result"></div>
  </body>
</html>
